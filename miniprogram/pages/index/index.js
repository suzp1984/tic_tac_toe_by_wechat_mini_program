"use strict";
var app = getApp();
Page({
    data: {
        motto: 'Hello World',
        userInfo: {},
        hasUserInfo: false,
        canIUse: wx.canIUse('button.open-type.getUserInfo'),
        isNextPlayerX: true,
        gameTitle: "Next Player X",
        isResetEnabled: false,
        winner: "",
        squareClasses: [
            "", "", "",
            "", "", "",
            "", "", ""
        ],
    },
    bindViewTap: function () {
        wx.navigateTo({
            url: '../logs/logs',
        });
    },
    onLoad: function () {
        var _this = this;
        if (app.globalData.userInfo) {
            this.setData({
                userInfo: app.globalData.userInfo,
                hasUserInfo: true,
            });
        }
        else if (this.data.canIUse) {
            app.userInfoReadyCallback = function (res) {
                _this.setData({
                    userInfo: res.userInfo,
                    hasUserInfo: true,
                });
            };
        }
        else {
            wx.getUserInfo({
                success: function (res) {
                    app.globalData.userInfo = res.userInfo;
                    _this.setData({
                        userInfo: res.userInfo,
                        hasUserInfo: true,
                    });
                },
            });
        }
    },
    getUserInfo: function (e) {
        console.log(e);
        app.globalData.userInfo = e.detail.userInfo;
        this.setData({
            userInfo: e.detail.userInfo,
            hasUserInfo: true,
        });
    },
    onTap: function (e) {
        console.log(e);
        console.log('on tap square ' + e.currentTarget.dataset['index']);
        var _index = e.currentTarget.dataset['index'];
        var _squareClass = this.data.squareClasses[_index];
        if (_squareClass != "") {
            console.log('current square already occupied by ' + _squareClass);
            return;
        }
        if (this.data.winner != '') {
            console.log('this round already has winner ' + this.data.winner);
            return;
        }
        var _isNextPlayerX = this.data.isNextPlayerX;
        var _squareClasses = this.data.squareClasses;
        _squareClasses[_index] = _isNextPlayerX ? 'player-x' : 'player-o';
        this.setData({
            isNextPlayerX: !_isNextPlayerX,
            gameTitle: !_isNextPlayerX ? "Next Player X" : "Next Player O",
            squareClasses: _squareClasses
        });
        this.calculateWinner();
    },
    reset: function () {
        this.setData({
            gameTitle: this.data.isNextPlayerX ? "Next Player X" : "Next Player O",
            isResetEnabled: false,
            winner: "",
            squareClasses: [
                "", "", "",
                "", "", "",
                "", "", ""
            ],
        });
    },
    calculateWinner: function () {
        var lines = [
            [0, 1, 2],
            [3, 4, 5],
            [6, 7, 8],
            [0, 3, 6],
            [1, 4, 7],
            [2, 5, 8],
            [0, 4, 8],
            [2, 4, 6]
        ];
        for (var i = 0; i < lines.length; i++) {
            var _a = lines[i], a = _a[0], b = _a[1], c = _a[2];
            if (this.data.squareClasses[a] != "" &&
                this.data.squareClasses[a] === this.data.squareClasses[b] &&
                this.data.squareClasses[b] === this.data.squareClasses[c]) {
                var _winner = this.data.squareClasses[a] === 'player-x' ? 'X' : 'O';
                this.setData({
                    isResetEnabled: true,
                    winner: _winner,
                    gameTitle: _winner === 'X' ? 'Winner is Player X' : 'Winner is Player O'
                });
                wx.showToast({
                    title: _winner === 'X' ? 'Player X Win' : 'Player O Win',
                    icon: 'none',
                    duration: 2000,
                });
                return;
            }
        }
        for (var i = 0; i < this.data.squareClasses.length; i++) {
            if (this.data.squareClasses[i] === "") {
                return;
            }
        }
        this.setData({
            isResetEnabled: true,
            gameTitle: "No Winner",
        });
        wx.showToast({
            title: 'No Winner',
            icon: 'none',
            duration: 2000,
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUEsSUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFjLENBQUE7QUFFaEMsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osS0FBSyxFQUFFLGFBQWE7UUFDcEIsUUFBUSxFQUFFLEVBQUU7UUFDWixXQUFXLEVBQUUsS0FBSztRQUNsQixPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQztRQUNuRCxhQUFhLEVBQUUsSUFBSTtRQUNuQixTQUFTLEVBQUUsZUFBZTtRQUMxQixjQUFjLEVBQUUsS0FBSztRQUNyQixNQUFNLEVBQUUsRUFBRTtRQUNWLGFBQWEsRUFBRTtZQUNiLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtZQUNWLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtZQUNWLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtTQUFDO0tBQ2Q7SUFFRCxXQUFXO1FBQ1QsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNaLEdBQUcsRUFBRSxjQUFjO1NBQ3BCLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFDRCxNQUFNO1FBQU4saUJBMkJDO1FBMUJDLElBQUksR0FBRyxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUU7WUFDM0IsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDWCxRQUFRLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxRQUFRO2dCQUNqQyxXQUFXLEVBQUUsSUFBSTthQUNsQixDQUFDLENBQUE7U0FDSDthQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFHNUIsR0FBRyxDQUFDLHFCQUFxQixHQUFHLFVBQUEsR0FBRztnQkFDN0IsS0FBSSxDQUFDLE9BQU8sQ0FBQztvQkFDWCxRQUFRLEVBQUUsR0FBRyxDQUFDLFFBQVE7b0JBQ3RCLFdBQVcsRUFBRSxJQUFJO2lCQUNsQixDQUFDLENBQUE7WUFD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O2lCQUN6RSxDQUFDLENBQUE7Z0JBRUYsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDWCxLQUFLLEVBQUUsT0FBTyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxjQUFjO29CQUN4RCxJQUFJLEVBQUUsTUFBTTtvQkFDWixRQUFRLEVBQUUsSUFBSTtpQkFDZixDQUFDLENBQUE7Z0JBRUYsT0FBTzthQUNSO1NBQ0Y7UUFFRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3ZELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUNyQyxPQUFPO2FBQ1I7U0FDRjtRQUVELElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxjQUFjLEVBQUUsSUFBSTtZQUNwQixTQUFTLEVBQUUsV0FBVztTQUN2QixDQUFDLENBQUE7UUFDRixFQUFFLENBQUMsU0FBUyxDQUFDO1lBQ1gsS0FBSyxFQUFFLFdBQVc7WUFDbEIsSUFBSSxFQUFFLE1BQU07WUFDWixRQUFRLEVBQUUsSUFBSTtTQUNmLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbmRleC50c1xuLy8g6I635Y+W5bqU55So5a6e5L6LXG5jb25zdCBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKVxuXG5QYWdlKHtcbiAgZGF0YToge1xuICAgIG1vdHRvOiAnSGVsbG8gV29ybGQnLFxuICAgIHVzZXJJbmZvOiB7fSxcbiAgICBoYXNVc2VySW5mbzogZmFsc2UsXG4gICAgY2FuSVVzZTogd3guY2FuSVVzZSgnYnV0dG9uLm9wZW4tdHlwZS5nZXRVc2VySW5mbycpLFxuICAgIGlzTmV4dFBsYXllclg6IHRydWUsXG4gICAgZ2FtZVRpdGxlOiBcIk5leHQgUGxheWVyIFhcIixcbiAgICBpc1Jlc2V0RW5hYmxlZDogZmFsc2UsXG4gICAgd2lubmVyOiBcIlwiLFxuICAgIHNxdWFyZUNsYXNzZXM6IFtcbiAgICAgIFwiXCIsIFwiXCIsIFwiXCIsXG4gICAgICBcIlwiLCBcIlwiLCBcIlwiLFxuICAgICAgXCJcIiwgXCJcIiwgXCJcIl0sXG4gIH0sXG4gIC8vIOS6i+S7tuWkhOeQhuWHveaVsFxuICBiaW5kVmlld1RhcCgpIHtcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgIHVybDogJy4uL2xvZ3MvbG9ncycsXG4gICAgfSlcbiAgfSxcbiAgb25Mb2FkKCkge1xuICAgIGlmIChhcHAuZ2xvYmFsRGF0YS51c2VySW5mbykge1xuICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgdXNlckluZm86IGFwcC5nbG9iYWxEYXRhLnVzZXJJbmZvLFxuICAgICAgICBoYXNVc2VySW5mbzogdHJ1ZSxcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuY2FuSVVzZSkge1xuICAgICAgLy8g55Sx5LqOIGdldFVzZXJJbmZvIOaYr+e9kee7nOivt+axgu+8jOWPr+iDveS8muWcqCBQYWdlLm9uTG9hZCDkuYvlkI7miY3ov5Tlm55cbiAgICAgIC8vIOaJgOS7peatpOWkhOWKoOWFpSBjYWxsYmFjayDku6XpmLLmraLov5nnp43mg4XlhrVcbiAgICAgIGFwcC51c2VySW5mb1JlYWR5Q2FsbGJhY2sgPSByZXMgPT4ge1xuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgIHVzZXJJbmZvOiByZXMudXNlckluZm8sXG4gICAgICAgICAgaGFzVXNlckluZm86IHRydWUsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWcqOayoeaciSBvcGVuLXR5cGU9Z2V0VXNlckluZm8g54mI5pys55qE5YW85a655aSE55CGXG4gICAgICB3eC5nZXRVc2VySW5mbyh7XG4gICAgICAgIHN1Y2Nlc3M6IHJlcyA9PiB7XG4gICAgICAgICAgYXBwLmdsb2JhbERhdGEudXNlckluZm8gPSByZXMudXNlckluZm9cbiAgICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgICAgdXNlckluZm86IHJlcy51c2VySW5mbyxcbiAgICAgICAgICAgIGhhc1VzZXJJbmZvOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH1cbiAgfSxcbiAgZ2V0VXNlckluZm8oZTogYW55KSB7XG4gICAgY29uc29sZS5sb2coZSlcbiAgICBhcHAuZ2xvYmFsRGF0YS51c2VySW5mbyA9IGUuZGV0YWlsLnVzZXJJbmZvXG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIHVzZXJJbmZvOiBlLmRldGFpbC51c2VySW5mbyxcbiAgICAgIGhhc1VzZXJJbmZvOiB0cnVlLFxuICAgIH0pXG4gIH0sXG4gIG9uVGFwKGU6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKGUpXG4gICAgY29uc29sZS5sb2coJ29uIHRhcCBzcXVhcmUgJyArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0WydpbmRleCddKVxuICAgIGxldCBfaW5kZXggPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldFsnaW5kZXgnXVxuICAgIGxldCBfc3F1YXJlQ2xhc3MgPSB0aGlzLmRhdGEuc3F1YXJlQ2xhc3Nlc1tfaW5kZXhdXG5cbiAgICBpZiAoX3NxdWFyZUNsYXNzICE9IFwiXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjdXJyZW50IHNxdWFyZSBhbHJlYWR5IG9jY3VwaWVkIGJ5ICcgKyBfc3F1YXJlQ2xhc3MpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLndpbm5lciAhPSAnJykge1xuICAgICAgY29uc29sZS5sb2coJ3RoaXMgcm91bmQgYWxyZWFkeSBoYXMgd2lubmVyICcgKyB0aGlzLmRhdGEud2lubmVyKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IF9pc05leHRQbGF5ZXJYID0gdGhpcy5kYXRhLmlzTmV4dFBsYXllclhcblxuICAgIGxldCBfc3F1YXJlQ2xhc3NlcyA9IHRoaXMuZGF0YS5zcXVhcmVDbGFzc2VzXG4gICAgX3NxdWFyZUNsYXNzZXNbX2luZGV4XSA9IF9pc05leHRQbGF5ZXJYID8gJ3BsYXllci14JyA6ICdwbGF5ZXItbydcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgaXNOZXh0UGxheWVyWDogIV9pc05leHRQbGF5ZXJYLFxuICAgICAgZ2FtZVRpdGxlOiAhX2lzTmV4dFBsYXllclggPyBcIk5leHQgUGxheWVyIFhcIiA6IFwiTmV4dCBQbGF5ZXIgT1wiLFxuICAgICAgc3F1YXJlQ2xhc3NlczogX3NxdWFyZUNsYXNzZXNcbiAgICB9KVxuXG4gICAgdGhpcy5jYWxjdWxhdGVXaW5uZXIoKVxuICB9LFxuICByZXNldCgpIHtcblxuICAgIHRoaXMuc2V0RGF0YShcbiAgICAgIHtcbiAgICAgICAgZ2FtZVRpdGxlOiB0aGlzLmRhdGEuaXNOZXh0UGxheWVyWCA/IFwiTmV4dCBQbGF5ZXIgWFwiIDogXCJOZXh0IFBsYXllciBPXCIsXG4gICAgICAgIGlzUmVzZXRFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgd2lubmVyOiBcIlwiLFxuICAgICAgICBzcXVhcmVDbGFzc2VzOiBbXG4gICAgICAgICAgXCJcIiwgXCJcIiwgXCJcIixcbiAgICAgICAgICBcIlwiLCBcIlwiLCBcIlwiLFxuICAgICAgICAgIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgfVxuICAgIClcbiAgfSxcbiAgY2FsY3VsYXRlV2lubmVyKCkge1xuICAgIGNvbnN0IGxpbmVzID0gW1xuICAgICAgWzAsIDEsIDJdLFxuICAgICAgWzMsIDQsIDVdLFxuICAgICAgWzYsIDcsIDhdLFxuICAgICAgWzAsIDMsIDZdLFxuICAgICAgWzEsIDQsIDddLFxuICAgICAgWzIsIDUsIDhdLFxuICAgICAgWzAsIDQsIDhdLFxuICAgICAgWzIsIDQsIDZdXG4gICAgXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IFthLCBiLCBjXSA9IGxpbmVzW2ldO1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuc3F1YXJlQ2xhc3Nlc1thXSAhPSBcIlwiICYmXG4gICAgICAgIHRoaXMuZGF0YS5zcXVhcmVDbGFzc2VzW2FdID09PSB0aGlzLmRhdGEuc3F1YXJlQ2xhc3Nlc1tiXSAmJlxuICAgICAgICB0aGlzLmRhdGEuc3F1YXJlQ2xhc3Nlc1tiXSA9PT0gdGhpcy5kYXRhLnNxdWFyZUNsYXNzZXNbY11cbiAgICAgICkge1xuICAgICAgICBsZXQgX3dpbm5lciA9IHRoaXMuZGF0YS5zcXVhcmVDbGFzc2VzW2FdID09PSAncGxheWVyLXgnID8gJ1gnIDogJ08nO1xuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgIGlzUmVzZXRFbmFibGVkOiB0cnVlLFxuICAgICAgICAgIHdpbm5lcjogX3dpbm5lcixcbiAgICAgICAgICBnYW1lVGl0bGU6IF93aW5uZXIgPT09ICdYJyA/ICdXaW5uZXIgaXMgUGxheWVyIFgnIDogJ1dpbm5lciBpcyBQbGF5ZXIgTydcbiAgICAgICAgfSlcblxuICAgICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiBfd2lubmVyID09PSAnWCcgPyAnUGxheWVyIFggV2luJyA6ICdQbGF5ZXIgTyBXaW4nLFxuICAgICAgICAgIGljb246ICdub25lJyxcbiAgICAgICAgICBkdXJhdGlvbjogMjAwMCxcbiAgICAgICAgfSlcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEuc3F1YXJlQ2xhc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuZGF0YS5zcXVhcmVDbGFzc2VzW2ldID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgaXNSZXNldEVuYWJsZWQ6IHRydWUsXG4gICAgICBnYW1lVGl0bGU6IFwiTm8gV2lubmVyXCIsXG4gICAgfSlcbiAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgdGl0bGU6ICdObyBXaW5uZXInLFxuICAgICAgaWNvbjogJ25vbmUnLFxuICAgICAgZHVyYXRpb246IDIwMDAsXG4gICAgfSlcbiAgfVxufSlcbiJdfQ==